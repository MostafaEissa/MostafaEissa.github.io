<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>2048 - Beyond Lambda</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=author content="Mostafa Abdelrahman"><meta name=description content="In this post we will try to implement the game 2048 as a console app in python!
">
<meta name=generator content="Hugo 0.88.1 with theme even">
<link rel=canonical href=https://mostafaeissa.github.io/post/the-game-2048/>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png>
<link rel=manifest href=/manifest.json>
<link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5>
<link href=/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css rel=stylesheet>
<link href=/lib/fancybox/jquery.fancybox-3.1.20.min.css rel=stylesheet>
<meta property="og:title" content="2048">
<meta property="og:description" content="In this post we will try to implement the game 2048 as a console app in python!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://mostafaeissa.github.io/post/the-game-2048/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2020-05-13T00:00:00+00:00">
<meta property="article:modified_time" content="2020-05-13T00:00:00+00:00">
<meta itemprop=name content="2048">
<meta itemprop=description content="In this post we will try to implement the game 2048 as a console app in python!"><meta itemprop=datePublished content="2020-05-13T00:00:00+00:00">
<meta itemprop=dateModified content="2020-05-13T00:00:00+00:00">
<meta itemprop=wordCount content="905">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="2048">
<meta name=twitter:description content="In this post we will try to implement the game 2048 as a console app in python!"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>Beyond Lambda</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<a href=/>
<li class=mobile-menu-item>Home</li>
</a><a href=/post/>
<li class=mobile-menu-item>Archives</li>
</a><a href=/about/>
<li class=mobile-menu-item>About</li>
</a>
</ul>
</nav>
<div class=container id=mobile-panel>
<header id=header class=header>
<div class=logo-wrapper>
<a href=/ class=logo>Beyond Lambda</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=/>Home</a>
</li><li class=menu-item>
<a class=menu-item-link href=/post/>Archives</a>
</li><li class=menu-item>
<a class=menu-item-link href=/about/>About</a>
</li>
</ul>
</nav>
</header>
<main id=main class=main>
<div class=content-wrapper>
<div id=content class=content>
<article class=post>
<header class=post-header>
<h1 class=post-title>2048</h1>
<div class=post-meta>
<span class=post-time> 2020-05-13 </span>
<div class=post-category>
<a href=/categories/programming/> Programming </a>
</div>
<span class=more-meta> 905 words </span>
<span class=more-meta> 5 mins read </span>
</div>
</header>
<div class=post-content>
<p>In this post we will try to implement the game 2048 as a console app in python!</p>
<h3 id=introduction>Introduction</h3>
<p>If you are not familiar with the <a href=https://en.wikipedia.org/wiki/2048_(video_game)>game 2048</a>. It is a sliding block puzzle game where you slide numbered tiles to combine them into a tile with the number 2048. You can checkout an online version <a href=https://play2048.co/>here</a> from the original creator.</p>
<h3 id=game-rules>Game Rules</h3>
<p>In order to implement the game we need to understand its rules. The game has only a few rules:</p>
<ol>
<li>
<p>At every turn, a tile randomly appears on the board with a value of 2 or 4.</p>
</li>
<li>
<p>The player can move the tiles in one of the four direction {left, right, up, down}</p>
<ul>
<li>tiles slides as far as possible in the played direction until stopped by another tile or the board edge</li>
<li>when two tiles with the same number collide together, they are merged ino a new title whose value is twice the value of the individual tile</li>
<li>a merged tile cannot merge with another tile in the same move.</li>
</ul>
</li>
</ol>
<h3 id=game-state>Game State</h3>
<p>We can represent the game as a 2D array which each cell position is either empty or contains a value that is a multiple of 2.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>create_board</span><span class=p>():</span>
    <span class=n>board</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>([</span>
        <span class=p>[</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>],</span>
        <span class=p>[</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>],</span>
        <span class=p>[</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>],</span>
        <span class=p>[</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>,</span><span class=kc>None</span><span class=p>]</span>
        <span class=p>])</span>
    <span class=k>return</span> <span class=n>board</span>
</code></pre></td></tr></table>
</div>
</div><p>We also need an additional function that will pick and empty cell and put a value of 2 or 4 into it.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>fill_random_cell</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=n>empty_slots</span> <span class=o>=</span> <span class=p>[(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>board</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span> <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>board</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=k>if</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=kc>None</span><span class=p>]</span>
    <span class=n>idx</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>randint</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>empty_slots</span><span class=p>))</span>
    <span class=n>value</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>])</span>
    <span class=n>board</span><span class=p>[</span><span class=n>empty_slots</span><span class=p>[</span><span class=n>idx</span><span class=p>]]</span> <span class=o>=</span> <span class=n>value</span>
</code></pre></td></tr></table>
</div>
</div><p>As such, in order to initialize the board we simply create an empty board and fill a random position on it.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>new_game</span><span class=p>():</span>
    <span class=c1># create a random empty board</span>
    <span class=n>board</span> <span class=o>=</span> <span class=n>create_board</span><span class=p>()</span>

    <span class=c1># fill an empty position with 2 or 4</span>
    <span class=n>fill_random_cell</span><span class=p>(</span><span class=n>board</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>board</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=merging-of-tiles>Merging of Tiles</h3>
<p>We need a couple of helper functions that can help us maage the game state.</p>
<p>First, we need a function to move the tiles in a certain direction by applying the rules specified below.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>shift_left</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=n>shape</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>height</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>width</span><span class=p>):</span>
            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>width</span><span class=p>):</span>
                <span class=k>if</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span>
                    <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>

<span class=k>def</span> <span class=nf>merge_tiles</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=n>shape</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>height</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>width</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=ow>and</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>*=</span> <span class=mi>2</span>
                <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>
</code></pre></td></tr></table>
</div>
</div><p>we can use the above functions to generalize board movement in all directions.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=n>direction</span><span class=p>):</span>
    <span class=n>new_board</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
    <span class=n>directions</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s1>&#39;left&#39;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=p>,</span>
        <span class=s1>&#39;right&#39;</span><span class=p>:</span> <span class=k>lambda</span> <span class=n>board</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>flip</span><span class=p>(</span><span class=n>board</span><span class=p>),</span>
        <span class=s1>&#39;up&#39;</span> <span class=p>:</span> <span class=k>lambda</span> <span class=n>board</span><span class=p>:</span> <span class=n>board</span><span class=o>.</span><span class=n>T</span><span class=p>,</span>
        <span class=s1>&#39;down&#39;</span><span class=p>:</span><span class=k>lambda</span> <span class=n>board</span><span class=p>:</span> <span class=n>np</span><span class=o>.</span><span class=n>flip</span><span class=p>(</span><span class=n>board</span><span class=p>)</span><span class=o>.</span><span class=n>T</span>
    <span class=p>}</span>
    <span class=n>transform</span> <span class=o>=</span> <span class=n>directions</span><span class=p>[</span><span class=n>direction</span><span class=p>]</span>
    
    <span class=n>new_board</span> <span class=o>=</span> <span class=n>transform</span><span class=p>(</span><span class=n>new_board</span><span class=p>)</span>
    <span class=n>shift_left</span><span class=p>(</span><span class=n>new_board</span><span class=p>)</span>
    <span class=n>merge_tiles</span><span class=p>(</span><span class=n>new_board</span><span class=p>)</span>
    <span class=n>shift_left</span><span class=p>(</span><span class=n>new_board</span><span class=p>)</span>
    <span class=n>new_board</span> <span class=o>=</span> <span class=n>transform</span><span class=p>(</span><span class=n>new_board</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>new_board</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=end-of-game>End of Game</h3>
<p>Second, we need a function to determine if we reached the end of a game i.e. if a player has won if a tile has the value <code>1024</code> or lost if there are no more available moves left.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>is_game_won</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=k>return</span> <span class=p>(</span><span class=n>board</span> <span class=o>==</span> <span class=mi>1024</span><span class=p>)</span><span class=o>.</span><span class=n>any</span><span class=p>()</span>

<span class=k>def</span> <span class=nf>is_game_lost</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=c1># check all move direction</span>
    <span class=c1># if no new board can be generated</span>
    <span class=c1># then the game is lost</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=s1>&#39;left&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=n>board</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> \
    <span class=ow>and</span> <span class=p>(</span><span class=n>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=s1>&#39;right&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=n>board</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> \
    <span class=ow>and</span> <span class=p>(</span><span class=n>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=s1>&#39;up&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=n>board</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> \
    <span class=ow>and</span> <span class=p>(</span><span class=n>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=s1>&#39;down&#39;</span><span class=p>)</span> <span class=o>==</span> <span class=n>board</span><span class=p>)</span><span class=o>.</span><span class=n>all</span><span class=p>()</span> <span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>
    
    <span class=k>return</span> <span class=kc>False</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=game-loop>Game Loop</h3>
<p>What is left is some function to draw the board to the screen and correctly handle user input. Drawing can be done by a simple two nested for loops but we must be careful because cells can be blank or contain values up to 1024 so we need to make sure they all get maximum possible width needed.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>draw</span><span class=p>(</span><span class=n>board</span><span class=p>):</span>
    <span class=n>width</span><span class=p>,</span> <span class=n>height</span> <span class=o>=</span> <span class=n>board</span><span class=o>.</span><span class=n>shape</span>
    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>height</span><span class=p>):</span>
        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>width</span><span class=p>):</span>
            <span class=n>value</span> <span class=o>=</span> <span class=s1>&#39;    &#39;</span> <span class=k>if</span> <span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=nb>str</span><span class=p>(</span><span class=n>board</span><span class=p>[</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>])</span><span class=o>.</span><span class=n>center</span><span class=p>(</span><span class=mi>4</span><span class=p>)</span>
            <span class=nb>print</span><span class=p>(</span><span class=n>value</span><span class=p>,</span>  <span class=n>end</span><span class=o>=</span><span class=s1>&#39;|&#39;</span><span class=p>)</span>
        <span class=nb>print</span><span class=p>()</span>
        <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;----|----|----|----&#39;</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p>We will also need to read and parse user input. To make things simply we will assume users will not enter wrong input so that we do not have to handle input validation.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>get_user_input</span><span class=p>():</span>
    <span class=n>inp</span> <span class=o>=</span> <span class=nb>input</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>inp</span> <span class=o>==</span> <span class=s1>&#39;w&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s1>&#39;up&#39;</span>
    <span class=k>elif</span> <span class=n>inp</span> <span class=o>==</span> <span class=s1>&#39;s&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s1>&#39;down&#39;</span>
    <span class=k>elif</span> <span class=n>inp</span> <span class=o>==</span> <span class=s1>&#39;a&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s1>&#39;left&#39;</span>
    <span class=k>elif</span> <span class=n>inp</span> <span class=o>==</span> <span class=s1>&#39;d&#39;</span><span class=p>:</span>
        <span class=k>return</span> <span class=s1>&#39;right&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>At this point, we need a loop to read the user input, apply the provided movement (left, right, up, down) and check the game state for game end.</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>game_loop</span><span class=p>():</span>
    <span class=c1># create a new game </span>
    <span class=n>board</span> <span class=o>=</span> <span class=n>new_game</span><span class=p>()</span>

    <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
        <span class=c1># draw board on screen</span>
        <span class=n>draw</span><span class=p>(</span><span class=n>board</span><span class=p>)</span>

        <span class=c1># get user input </span>
        <span class=nb>dir</span> <span class=o>=</span> <span class=n>get_user_input</span><span class=p>()</span>

        <span class=c1># update game board</span>
        <span class=n>board</span> <span class=o>=</span> <span class=n>move</span><span class=p>(</span><span class=n>board</span><span class=p>,</span> <span class=nb>dir</span><span class=p>)</span>
        <span class=n>fill_random_cell</span><span class=p>(</span><span class=n>board</span><span class=p>)</span>
        
        <span class=c1># check game state</span>
        <span class=n>is_won</span><span class=p>,</span> <span class=n>is_lost</span> <span class=o>=</span> <span class=n>is_game_won</span><span class=p>(</span><span class=n>board</span><span class=p>),</span> <span class=n>is_game_lost</span><span class=p>(</span><span class=n>board</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>is_won</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;You Won!&#39;</span><span class=p>)</span>
            <span class=k>break</span>
        <span class=k>elif</span> <span class=n>is_lost</span><span class=p>:</span>
            <span class=nb>print</span><span class=p>(</span><span class=s1>&#39;You Lost!)</span>
            <span class=k>break</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>continue</span>
</code></pre></td></tr></table>
</div>
</div><p>and that is all :).</p>
</div>
<footer class=post-footer>
<nav class=post-nav>
<a class=prev href=/post/how-to-speak/>
<i class="iconfont icon-left"></i>
<span class="prev-text nav-default">How to Speak</span>
<span class="prev-text nav-mobile">Prev</span>
</a>
<a class=next href=/post/but-i-dont-have-enough-time/>
<span class="next-text nav-default">Time Management and Priorities</span>
<span class="next-text nav-mobile">Next</span>
<i class="iconfont icon-right"></i>
</a>
</nav>
</footer>
</article>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=social-links>
<a href=https://github.com/MostafaEissa class="iconfont icon-github" title=github></a>
<a href=https://mostafaeissa.github.io/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a>
</span>
<span class=copyright-year>
&copy;
2019 -
2021<span class=heart><i class="iconfont icon-heart"></i></span><span>Mostafa Abdelrahman</span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class="iconfont icon-up"></i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/lib/fancybox/jquery.fancybox-3.1.20.min.js></script>
<script type=text/javascript src=/js/main.min.b9b83715ef36d47306eef3107cac0706a20908596d09bdbf53f6ac25dc8bd225.js></script>
</body>
</html>